version: 2

sources:
  - name: public
    description: "Raw data loaded from the stock market ELT pipeline."
    tables:
      - name: source_polygon_stocks_raw
        description: "Raw daily OHLCV data for all tickers from Polygon.io."
        loaded_at_field: inserted_at
        config:
          freshness:
            warn_after: {count: 1, period: day}

      - name: source_polygon_options_raw
        description: "Raw daily OHLCV data for all options contracts from Polygon.io."
        loaded_at_field: inserted_at
        config:
          freshness:
            warn_after: {count: 1, period: day}

models:
  - name: stg_polygon__options_bars
    description: "Cleans and renames data from the options snapshot, selecting only currently valid records."

  - name: stg_polygon__stocks_bars
    description: "Cleans and renames data from the stock_bars snapshot, selecting only the currently valid records. This model serves as the foundation for all downstream transformations."
